CKEDITOR.dom.range=function(a){this.startContainer=null;this.startOffset=null;this.endContainer=null;this.endOffset=null;this.collapsed=true;this.document=a};(function(){var e=function(j){j.collapsed=(j.startContainer&&j.endContainer&&j.startContainer.equals(j.endContainer)&&j.startOffset==j.endOffset)};var f=function(w,B,m,l){w.optimizeBookmark();var J=w.startContainer;var y=w.endContainer;var E=w.startOffset;var s=w.endOffset;var A;var t;if(y.type==CKEDITOR.NODE_TEXT){y=y.split(s)}else{if(y.getChildCount()>0){if(s>=y.getChildCount()){y=y.append(w.document.createText(""));t=true}else{y=y.getChild(s)}}}if(J.type==CKEDITOR.NODE_TEXT){J.split(E);if(J.equals(y)){y=J.getNext()}}else{if(!E){J=J.getFirst().insertBeforeMe(w.document.createText(""));A=true}else{if(E>=J.getChildCount()){J=J.append(w.document.createText(""));A=true}else{J=J.getChild(E).getPrevious()}}}var G=J.getParents();var o=y.getParents();var F,K,I;for(F=0;F<G.length;F++){K=G[F];I=o[F];if(!K.equals(I)){break}}var H=m,x,v,q,u;for(var C=F;C<G.length;C++){x=G[C];if(H&&!x.equals(J)){v=H.append(x.clone())}q=x.getNext();while(q){if(q.equals(o[C])||q.equals(y)){break}u=q.getNext();if(B==2){H.append(q.clone(true))}else{q.remove();if(B==1){H.append(q)}}q=u}if(H){H=v}}H=m;for(var z=F;z<o.length;z++){x=o[z];if(B>0&&!x.equals(y)){v=H.append(x.clone())}if(!G[z]||x.$.parentNode!=G[z].$.parentNode){q=x.getPrevious();while(q){if(q.equals(G[z])||q.equals(J)){break}u=q.getPrevious();if(B==2){H.$.insertBefore(q.$.cloneNode(true),H.$.firstChild)}else{q.remove();if(B==1){H.$.insertBefore(q.$,H.$.firstChild)}}q=u}}if(H){H=v}}if(B==2){var n=w.startContainer;if(n.type==CKEDITOR.NODE_TEXT){n.$.data+=n.$.nextSibling.data;n.$.parentNode.removeChild(n.$.nextSibling)}var r=w.endContainer;if(r.type==CKEDITOR.NODE_TEXT&&r.$.nextSibling){r.$.data+=r.$.nextSibling.data;r.$.parentNode.removeChild(r.$.nextSibling)}}else{if(K&&I&&(J.$.parentNode!=K.$.parentNode||y.$.parentNode!=I.$.parentNode)){var p=I.getIndex();if(A&&I.$.parentNode==J.$.parentNode){p--}if(l&&K.type==CKEDITOR.NODE_ELEMENT){var D=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',w.document);D.insertAfter(K);K.mergeSiblings(false);w.moveToBookmark({startNode:D})}else{w.setStart(I.getParent(),p)}}w.collapse(true)}if(A){J.remove()}if(t&&y.$.parentNode){y.remove()}};var c={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1};function g(m){var l=false,k=CKEDITOR.dom.walker.bookmark(true),j=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/;return function(n){if(k(n)){return true}if(n.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.env.ie&&j.test(n.getText())&&!l&&!(m&&n.getNext())){l=true}else{if(n.hasAscendant("pre")||CKEDITOR.tools.trim(n.getText()).length){return false}}}else{if(n.type==CKEDITOR.NODE_ELEMENT){if(!c[n.getName()]){if(!CKEDITOR.env.ie&&n.is("br")&&!l&&!(m&&n.getNext())){l=true}else{return false}}}}return true}}var b=CKEDITOR.dom.walker.bogus();function i(j){return function(k){return !j&&b(k)||(k.type==CKEDITOR.NODE_TEXT?!CKEDITOR.tools.trim(k.getText())||!!k.getParent().data("cke-bookmark"):k.getName() in CKEDITOR.dtd.$removeEmpty)}}var a=new CKEDITOR.dom.walker.whitespaces(),d=new CKEDITOR.dom.walker.bookmark();function h(j){return !a(j)&&!d(j)}CKEDITOR.dom.range.prototype={clone:function(){var j=new CKEDITOR.dom.range(this.document);j.startContainer=this.startContainer;j.startOffset=this.startOffset;j.endContainer=this.endContainer;j.endOffset=this.endOffset;j.collapsed=this.collapsed;return j},collapse:function(j){if(j){this.endContainer=this.startContainer;this.endOffset=this.startOffset}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset}this.collapsed=true},cloneContents:function(){var j=new CKEDITOR.dom.documentFragment(this.document);if(!this.collapsed){f(this,2,j)}return j},deleteContents:function(j){if(this.collapsed){return}f(this,0,null,j)},extractContents:function(k){var j=new CKEDITOR.dom.documentFragment(this.document);if(!this.collapsed){f(this,1,j,k)}return j},createBookmark:function(m){var l,j;var k;var o;var n=this.collapsed;l=this.document.createElement("span");l.data("cke-bookmark",1);l.setStyle("display","none");l.setHtml("&nbsp;");if(m){k="cke_bm_"+CKEDITOR.tools.getNextNumber();l.setAttribute("id",k+(n?"C":"S"))}if(!n){j=l.clone();j.setHtml("&nbsp;");if(m){j.setAttribute("id",k+"E")}o=this.clone();o.collapse();o.insertNode(j)}o=this.clone();o.collapse(true);o.insertNode(l);if(j){this.setStartAfter(l);this.setEndBefore(j)}else{this.moveToPosition(l,CKEDITOR.POSITION_AFTER_END)}return{startNode:m?k+(n?"C":"S"):l,endNode:m?k+"E":j,serializable:m,collapsed:n}},createBookmark2:function(p){var m=this.startContainer,n=this.endContainer;var j=this.startOffset,k=this.endOffset;var o=this.collapsed;var q,l;if(!m||!n){return{start:0,end:0}}if(p){if(m.type==CKEDITOR.NODE_ELEMENT){q=m.getChild(j);if(q&&q.type==CKEDITOR.NODE_TEXT&&j>0&&q.getPrevious().type==CKEDITOR.NODE_TEXT){m=q;j=0}if(q&&q.type==CKEDITOR.NODE_ELEMENT){j=q.getIndex(1)}}while(m.type==CKEDITOR.NODE_TEXT&&(l=m.getPrevious())&&l.type==CKEDITOR.NODE_TEXT){m=l;j+=l.getLength()}if(!o){if(n.type==CKEDITOR.NODE_ELEMENT){q=n.getChild(k);if(q&&q.type==CKEDITOR.NODE_TEXT&&k>0&&q.getPrevious().type==CKEDITOR.NODE_TEXT){n=q;k=0}if(q&&q.type==CKEDITOR.NODE_ELEMENT){k=q.getIndex(1)}}while(n.type==CKEDITOR.NODE_TEXT&&(l=n.getPrevious())&&l.type==CKEDITOR.NODE_TEXT){n=l;k+=l.getLength()}}}return{start:m.getAddress(p),end:o?null:n.getAddress(p),startOffset:j,endOffset:k,normalized:p,collapsed:o,is2:true}},moveToBookmark:function(o){if(o.is2){var p=this.document.getByAddress(o.start,o.normalized),k=o.startOffset;var q=o.end&&this.document.getByAddress(o.end,o.normalized),m=o.endOffset;this.setStart(p,k);if(q){this.setEnd(q,m)}else{this.collapse(true)}}else{var n=o.serializable,l=n?this.document.getById(o.startNode):o.startNode,j=n?this.document.getById(o.endNode):o.endNode;this.setStartBefore(l);l.remove();if(j){this.setEndBefore(j);j.remove()}else{this.collapse(true)}}},getBoundaryNodes:function(){var n=this.startContainer,k=this.endContainer,j=this.startOffset,m=this.endOffset,l;if(n.type==CKEDITOR.NODE_ELEMENT){l=n.getChildCount();if(l>j){n=n.getChild(j)}else{if(l<1){n=n.getPreviousSourceNode()}else{n=n.$;while(n.lastChild){n=n.lastChild}n=new CKEDITOR.dom.node(n);n=n.getNextSourceNode()||n}}}if(k.type==CKEDITOR.NODE_ELEMENT){l=k.getChildCount();if(l>m){k=k.getChild(m).getPreviousSourceNode(true)}else{if(l<1){k=k.getPreviousSourceNode()}else{k=k.$;while(k.lastChild){k=k.lastChild}k=new CKEDITOR.dom.node(k)}}}if(n.getPosition(k)&CKEDITOR.POSITION_FOLLOWING){n=k}return{startNode:n,endNode:k}},getCommonAncestor:function(k,m){var n=this.startContainer,j=this.endContainer,l;if(n.equals(j)){if(k&&n.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1){l=n.getChild(this.startOffset)}else{l=n}}else{l=n.getCommonAncestor(j)}return m&&!l.is?l.getParent():l},optimize:function(){var j=this.startContainer;var k=this.startOffset;if(j.type!=CKEDITOR.NODE_ELEMENT){if(!k){this.setStartBefore(j)}else{if(k>=j.getLength()){this.setStartAfter(j)}}}j=this.endContainer;k=this.endOffset;if(j.type!=CKEDITOR.NODE_ELEMENT){if(!k){this.setEndBefore(j)}else{if(k>=j.getLength()){this.setEndAfter(j)}}}},optimizeBookmark:function(){var k=this.startContainer,j=this.endContainer;if(k.is&&k.is("span")&&k.data("cke-bookmark")){this.setStartAt(k,CKEDITOR.POSITION_BEFORE_START)}if(j&&j.is&&j.is("span")&&j.data("cke-bookmark")){this.setEndAt(j,CKEDITOR.POSITION_AFTER_END)}},trim:function(m,p){var n=this.startContainer,j=this.startOffset,q=this.collapsed;if((!m||q)&&n&&n.type==CKEDITOR.NODE_TEXT){if(!j){j=n.getIndex();n=n.getParent()}else{if(j>=n.getLength()){j=n.getIndex()+1;n=n.getParent()}else{var l=n.split(j);j=n.getIndex()+1;n=n.getParent();if(this.startContainer.equals(this.endContainer)){this.setEnd(l,this.endOffset-this.startOffset)}else{if(n.equals(this.endContainer)){this.endOffset+=1}}}}this.setStart(n,j);if(q){this.collapse(true);return}}var o=this.endContainer;var k=this.endOffset;if(!(p||q)&&o&&o.type==CKEDITOR.NODE_TEXT){if(!k){k=o.getIndex();o=o.getParent()}else{if(k>=o.getLength()){k=o.getIndex()+1;o=o.getParent()}else{o.split(k);k=o.getIndex()+1;o=o.getParent()}}this.setEnd(o,k)}},enlarge:function(x,u){switch(x){case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed){return}var l=this.getCommonAncestor();var t=this.document.getBody();var n,K;var E,I,r;var m=false;var y;var j;var v=this.startContainer;var o=this.startOffset;if(v.type==CKEDITOR.NODE_TEXT){if(o){v=!CKEDITOR.tools.trim(v.substring(0,o)).length&&v;m=!!v}if(v){if(!(I=v.getPrevious())){E=v.getParent()}}}else{if(o){I=v.getChild(o-1)||v.getLast()}if(!I){E=v}}while(E||I){if(E&&!I){if(!r&&E.equals(l)){r=true}if(!t.contains(E)){break}if(!m||E.getComputedStyle("display")!="inline"){m=false;if(r){n=E}else{this.setStartBefore(E)}}I=E.getPrevious()}while(I){y=false;if(I.type==CKEDITOR.NODE_COMMENT){I=I.getPrevious();continue}else{if(I.type==CKEDITOR.NODE_TEXT){j=I.getText();if(/[^\s\ufeff]/.test(j)){I=null}y=/[\s\ufeff]$/.test(j)}else{if((I.$.offsetWidth>0||u&&I.is("br"))&&!I.data("cke-bookmark")){if(m&&CKEDITOR.dtd.$removeEmpty[I.getName()]){j=I.getText();if((/[^\s\ufeff]/).test(j)){I=null}else{var C=I.$.getElementsByTagName("*");for(var H=0,p;p=C[H++];){if(!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]){I=null;break}}}if(I){y=!!j.length}}else{I=null}}}}if(y){if(m){if(r){n=E}else{if(E){this.setStartBefore(E)}}}else{m=true}}if(I){var D=I.getPrevious();if(!E&&!D){E=I;I=null;break}I=D}else{E=null}}if(E){E=E.getParent()}}v=this.endContainer;o=this.endOffset;E=I=null;r=m=false;if(v.type==CKEDITOR.NODE_TEXT){v=!CKEDITOR.tools.trim(v.substring(o)).length&&v;m=!(v&&v.getLength());if(v){if(!(I=v.getNext())){E=v.getParent()}}}else{I=v.getChild(o);if(!I){E=v}}while(E||I){if(E&&!I){if(!r&&E.equals(l)){r=true}if(!t.contains(E)){break}if(!m||E.getComputedStyle("display")!="inline"){m=false;if(r){K=E}else{if(E){this.setEndAfter(E)}}}I=E.getNext()}while(I){y=false;if(I.type==CKEDITOR.NODE_TEXT){j=I.getText();if(/[^\s\ufeff]/.test(j)){I=null}y=/^[\s\ufeff]/.test(j)}else{if(I.type==CKEDITOR.NODE_ELEMENT){if((I.$.offsetWidth>0||u&&I.is("br"))&&!I.data("cke-bookmark")){if(m&&CKEDITOR.dtd.$removeEmpty[I.getName()]){j=I.getText();if((/[^\s\ufeff]/).test(j)){I=null}else{C=I.$.getElementsByTagName("*");for(H=0;p=C[H++];){if(!CKEDITOR.dtd.$removeEmpty[p.nodeName.toLowerCase()]){I=null;break}}}if(I){y=!!j.length}}else{I=null}}}else{y=1}}if(y){if(m){if(r){K=E}else{this.setEndAfter(E)}}}if(I){D=I.getNext();if(!E&&!D){E=I;I=null;break}I=D}else{E=null}}if(E){E=E.getParent()}}if(n&&K){l=n.contains(K)?K:n;this.setStartBefore(l);this.setEndAfter(l)}break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:var B=new CKEDITOR.dom.range(this.document);t=this.document.getBody();B.setStartAt(t,CKEDITOR.POSITION_AFTER_START);B.setEnd(this.startContainer,this.startOffset);var G=new CKEDITOR.dom.walker(B),L,w,F=CKEDITOR.dom.walker.blockBoundary((x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS)?{br:1}:null),s=function(N){var M=F(N);if(!M){L=N}return M},A=function(N){var M=s(N);if(!M&&N.is&&N.is("br")){w=N}return M};G.guard=s;E=G.lastBackward();L=L||t;this.setStartAt(L,!L.is("br")&&(!E&&this.checkStartOfBlock()||E&&L.contains(E))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){var J=this.clone();G=new CKEDITOR.dom.walker(J);var z=CKEDITOR.dom.walker.whitespaces(),q=CKEDITOR.dom.walker.bookmark();G.evaluator=function(M){return !z(M)&&!q(M)};var k=G.previous();if(k&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("br")){return}}B=this.clone();B.collapse();B.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);G=new CKEDITOR.dom.walker(B);G.guard=(x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS)?A:s;L=null;E=G.lastForward();L=L||t;this.setEndAt(L,(!E&&this.checkEndOfBlock()||E&&L.contains(E))?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);if(w){this.setEndAfter(w)}}},shrink:function(q,v){if(!this.collapsed){q=q||CKEDITOR.SHRINK_TEXT;var l=this.clone();var m=this.startContainer,x=this.endContainer,t=this.startOffset,u=this.endOffset,o=this.collapsed;var k=1,w=1;if(m&&m.type==CKEDITOR.NODE_TEXT){if(!t){l.setStartBefore(m)}else{if(t>=m.getLength()){l.setStartAfter(m)}else{l.setStartBefore(m);k=0}}}if(x&&x.type==CKEDITOR.NODE_TEXT){if(!u){l.setEndBefore(x)}else{if(u>=x.getLength()){l.setEndAfter(x)}else{l.setEndAfter(x);w=0}}}var j=new CKEDITOR.dom.walker(l),n=CKEDITOR.dom.walker.bookmark();j.evaluator=function(y){return y.type==(q==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var p;j.guard=function(z,y){if(n(z)){return true}if(q==CKEDITOR.SHRINK_ELEMENT&&z.type==CKEDITOR.NODE_TEXT){return false}if(y&&z.equals(p)){return false}if(!y&&z.type==CKEDITOR.NODE_ELEMENT){p=z}return true};if(k){var s=j[q==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]();s&&this.setStartAt(s,v?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START)}if(w){j.reset();var r=j[q==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]();r&&this.setEndAt(r,v?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)}return !!(k||w)}},insertNode:function(m){this.optimizeBookmark();this.trim(false,true);var l=this.startContainer;var k=this.startOffset;var j=l.getChild(k);if(j){m.insertBefore(j)}else{l.append(m)}if(m.getParent().equals(this.endContainer)){this.endOffset++}this.setStartBefore(m)},moveToPosition:function(k,j){this.setStartAt(k,j);this.collapse(true)},selectNodeContents:function(j){this.setStart(j,0);this.setEnd(j,j.type==CKEDITOR.NODE_TEXT?j.getLength():j.getChildCount())},setStart:function(k,j){if(k.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[k.getName()]){j=k.getIndex(),k=k.getParent()}this.startContainer=k;this.startOffset=j;if(!this.endContainer){this.endContainer=k;this.endOffset=j}e(this)},setEnd:function(j,k){if(j.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[j.getName()]){k=j.getIndex()+1,j=j.getParent()}this.endContainer=j;this.endOffset=k;if(!this.startContainer){this.startContainer=j;this.startOffset=k}e(this)},setStartAfter:function(j){this.setStart(j.getParent(),j.getIndex()+1)},setStartBefore:function(j){this.setStart(j.getParent(),j.getIndex())},setEndAfter:function(j){this.setEnd(j.getParent(),j.getIndex()+1)},setEndBefore:function(j){this.setEnd(j.getParent(),j.getIndex())},setStartAt:function(k,j){switch(j){case CKEDITOR.POSITION_AFTER_START:this.setStart(k,0);break;case CKEDITOR.POSITION_BEFORE_END:if(k.type==CKEDITOR.NODE_TEXT){this.setStart(k,k.getLength())}else{this.setStart(k,k.getChildCount())}break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(k);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(k)}e(this)},setEndAt:function(k,j){switch(j){case CKEDITOR.POSITION_AFTER_START:this.setEnd(k,0);break;case CKEDITOR.POSITION_BEFORE_END:if(k.type==CKEDITOR.NODE_TEXT){this.setEnd(k,k.getLength())}else{this.setEnd(k,k.getChildCount())}break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(k);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(k)}e(this)},fixBlock:function(j,m){var l=this.createBookmark(),k=this.document.createElement(m);this.collapse(j);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(k);k.trim();if(!CKEDITOR.env.ie){k.appendBogus()}this.insertNode(k);this.moveToBookmark(l);return k},splitBlock:function(o){var r=new CKEDITOR.dom.elementPath(this.startContainer),l=new CKEDITOR.dom.elementPath(this.endContainer);var q=r.blockLimit,n=l.blockLimit;var p=r.block,m=l.block;var s=null;if(!q.equals(n)){return null}if(o!="br"){if(!p){p=this.fixBlock(true,o);m=new CKEDITOR.dom.elementPath(this.endContainer).block}if(!m){m=this.fixBlock(false,o)}}var k=p&&this.checkStartOfBlock(),j=m&&this.checkEndOfBlock();this.deleteContents();if(p&&p.equals(m)){if(j){s=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(m,CKEDITOR.POSITION_AFTER_END);m=null}else{if(k){s=new CKEDITOR.dom.elementPath(this.startContainer);this.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START);p=null}else{m=this.splitElement(p);if(!CKEDITOR.env.ie&&!p.is("ul","ol")){p.appendBogus()}}}}return{previousBlock:p,nextBlock:m,wasStartOfBlock:k,wasEndOfBlock:j,elementPath:s}},splitElement:function(k){if(!this.collapsed){return null}this.setEndAt(k,CKEDITOR.POSITION_BEFORE_END);var j=this.extractContents();var l=k.clone(false);j.appendTo(l);l.insertAfter(k);this.moveToPosition(k,CKEDITOR.POSITION_AFTER_END);return l},checkBoundaryOfElement:function(l,j){var m=(j==CKEDITOR.START);var k=this.clone();k.collapse(m);k[m?"setStartAt":"setEndAt"](l,m?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);var n=new CKEDITOR.dom.walker(k);n.evaluator=i(m);return n[m?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var m=this.startContainer,j=this.startOffset;if(j&&m.type==CKEDITOR.NODE_TEXT){var l=CKEDITOR.tools.ltrim(m.substring(0,j));if(l.length){return false}}var n=new CKEDITOR.dom.elementPath(this.startContainer);var k=this.clone();k.collapse(true);k.setStartAt(n.block||n.blockLimit,CKEDITOR.POSITION_AFTER_START);var o=new CKEDITOR.dom.walker(k);o.evaluator=g(true);return o.checkBackward()},checkEndOfBlock:function(){var m=this.endContainer,l=this.endOffset;if(m.type==CKEDITOR.NODE_TEXT){var j=CKEDITOR.tools.rtrim(m.substring(l));if(j.length){return false}}var n=new CKEDITOR.dom.elementPath(this.endContainer);var k=this.clone();k.collapse(false);k.setEndAt(n.block||n.blockLimit,CKEDITOR.POSITION_BEFORE_END);var o=new CKEDITOR.dom.walker(k);o.evaluator=g(false);return o.checkForward()},checkReadOnly:(function(){function j(k,l){while(k){if(k.type==CKEDITOR.NODE_ELEMENT){if(k.getAttribute("contentEditable")=="false"&&!k.data("cke-editable")){return 0}else{if(k.is("html")||k.getAttribute("contentEditable")=="true"&&(k.contains(l)||k.equals(l))){break}}}k=k.getParent()}return 1}return function(){var l=this.startContainer,k=this.endContainer;return !(j(l,k)&&j(k,l))}})(),moveToElementEditablePosition:function(m,l){var j=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/;function k(q,o){var p;if(q.type==CKEDITOR.NODE_ELEMENT&&q.isEditable(false)){p=q[l?"getLast":"getFirst"](h)}if(!o&&!p){p=q[l?"getPrevious":"getNext"](h)}return p}if(m.type==CKEDITOR.NODE_ELEMENT&&!m.isEditable(false)){this.moveToPosition(m,l?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);return true}var n=0;while(m){if(m.type==CKEDITOR.NODE_TEXT){if(l&&this.checkEndOfBlock()&&j.test(m.getText())){this.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)}else{this.moveToPosition(m,l?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START)}n=1;break}if(m.type==CKEDITOR.NODE_ELEMENT){if(m.isEditable()){this.moveToPosition(m,l?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START);n=1}else{if(l&&m.is("br")&&this.checkEndOfBlock()){this.moveToPosition(m,CKEDITOR.POSITION_BEFORE_START)}}}m=k(m,n)}return !!n},moveToElementEditStart:function(j){return this.moveToElementEditablePosition(j)},moveToElementEditEnd:function(j){return this.moveToElementEditablePosition(j,true)},getEnclosedNode:function(){var j=this.clone();j.optimize();if(j.startContainer.type!=CKEDITOR.NODE_ELEMENT||j.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var m=new CKEDITOR.dom.walker(j),l=CKEDITOR.dom.walker.bookmark(true),o=CKEDITOR.dom.walker.whitespaces(true),n=function(p){return o(p)&&l(p)};j.evaluator=n;var k=m.next();m.reset();return k&&k.equals(m.previous())?k:null},getTouchedStartNode:function(){var j=this.startContainer;if(this.collapsed||j.type!=CKEDITOR.NODE_ELEMENT){return j}return j.getChild(this.startOffset)||j},getTouchedEndNode:function(){var j=this.endContainer;if(this.collapsed||j.type!=CKEDITOR.NODE_ELEMENT){return j}return j.getChild(this.endOffset-1)||j}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.STARTEND=3;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;