if(!CKEDITOR.event){CKEDITOR.event=function(){};CKEDITOR.event.implementOn=function(a){var b=CKEDITOR.event.prototype;for(var c in b){if(a[c]==undefined){a[c]=b[c]}}};CKEDITOR.event.prototype=(function(){var a=function(d){var c=(d.getPrivate&&d.getPrivate())||d._||(d._={});return c.events||(c.events={})};var b=function(c){this.name=c;this.listeners=[]};b.prototype={getListenerIndex:function(e){for(var c=0,d=this.listeners;c<d.length;c++){if(d[c].fn==e){return c}}return -1}};return{on:function(g,k,f,n,l){var m=a(this),c=m[g]||(m[g]=new b(g));if(c.getListenerIndex(k)<0){var j=c.listeners;if(!f){f=this}if(isNaN(l)){l=10}var h=this;var d=function(o,r,q,i){var p={name:g,sender:this,editor:o,data:r,listenerData:n,stop:q,cancel:i,removeListener:function(){h.removeListener(g,k)}};k.call(f,p);return p.data};d.fn=k;d.priority=l;for(var e=j.length-1;e>=0;e--){if(j[e].priority<=l){j.splice(e+1,0,d);return}}j.unshift(d)}},fire:(function(){var f=false;var e=function(){f=true};var c=false;var d=function(){c=true};return function(m,h,n){var g=a(this)[m];var q=f,k=c;f=c=false;if(g){var p=g.listeners;if(p.length){p=p.slice(0);for(var j=0;j<p.length;j++){var l=p[j].call(this,n,h,e,d);if(typeof l!="undefined"){h=l}if(f||c){break}}}}var o=c||(typeof h=="undefined"?false:h);f=q;c=k;return o}})(),fireOnce:function(c,f,e){var d=this.fire(c,f,e);delete a(this)[c];return d},removeListener:function(c,f){var e=a(this)[c];if(e){var d=e.getListenerIndex(f);if(d>=0){e.listeners.splice(d,1)}}},hasListeners:function(c){var d=a(this)[c];return(d&&d.listeners.length>0)}}})()};