(function(){var b=["click","keydown","mousedown","keypress","mouseover","mouseout"];function a(c){var e=c.getElementsByTag("*"),f=e.count(),g;for(var d=0;d<f;d++){g=e.getItem(d);(function(i){for(var h=0;h<b.length;h++){(function(j){var k=i.getAttribute("on"+j);if(i.hasAttribute("on"+j)){i.removeAttribute("on"+j);i.on(j,function(t){var m=/(return\s*)?CKEDITOR\.tools\.callFunction\(([^)]+)\)/.exec(k),u=m&&m[1],p=m&&m[2].split(","),r=/return false;/.test(k);if(p){var s=p.length,l;for(var q=0;q<s;q++){p[q]=l=CKEDITOR.tools.trim(p[q]);var o=l.match(/^(["'])([^"']*?)\1$/);if(o){p[q]=o[2];continue}if(l.match(/\d+/)){p[q]=parseInt(l,10);continue}switch(l){case"this":p[q]=i.$;break;case"event":p[q]=t.data.$;break;case"null":p[q]=null;break}}var n=CKEDITOR.tools.callFunction.apply(window,p);if(u&&n===false){r=1}}if(r){t.data.preventDefault()}})}})(b[h])}})(g)}}CKEDITOR.plugins.add("adobeair",{init:function(c){if(!CKEDITOR.env.air){return}c.addCss("body { padding: 8px }");c.on("uiReady",function(){a(c.container);if(c.sharedSpaces){for(var d in c.sharedSpaces){a(c.sharedSpaces[d])}}c.on("elementsPathUpdate",function(e){a(e.data.space)})});c.on("contentDom",function(){c.document.on("click",function(d){d.data.preventDefault(true)})})}});CKEDITOR.ui.on("ready",function(d){var f=d.data;if(f._.panel){var c=f._.panel._.panel,e;(function(){if(!c.isLoaded){setTimeout(arguments.callee,30);return}e=c._.holder;a(e)})()}else{if(f instanceof CKEDITOR.dialog){a(f._.element)}}})})();CKEDITOR.dom.document.prototype.write=CKEDITOR.tools.override(CKEDITOR.dom.document.prototype.write,function(b){function a(e,d,h,g){var f=e.append(d),c=CKEDITOR.htmlParser.fragment.fromHtml(h).children[0].attributes;c&&f.setAttributes(c);g&&f.append(e.getDocument().createText(g))}return function(d,f){if(this.getBody()){var e=this,c=this.getHead();d=d.replace(/(<style[^>]*>)([\s\S]*?)<\/style>/gi,function(g,h,i){a(c,"style",h,i);return""});d=d.replace(/<base\b[^>]*\/>/i,function(g){a(c,"base",g);return""});d=d.replace(/<title>([\s\S]*)<\/title>/i,function(g,h){e.$.title=h;return""});d=d.replace(/<head>([\s\S]*)<\/head>/i,function(g){var h=new CKEDITOR.dom.element("div",e);h.setHtml(g);h.moveChildren(c);return""});d.replace(/(<body[^>]*>)([\s\S]*)(?=$|<\/body>)/i,function(h,i,j){e.getBody().setHtml(j);var g=CKEDITOR.htmlParser.fragment.fromHtml(i).children[0].attributes;g&&e.getBody().setAttributes(g)})}else{b.apply(this,arguments)}}});