CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;(function(){var g=CKEDITOR.tools.cssLength;function e(E){return !!this._.tabs[E][0].$.offsetHeight}function p(){var F=this._.currentTabId,H=this._.tabIdList.length,E=CKEDITOR.tools.indexOf(this._.tabIdList,F)+H;for(var G=E-1;G>E-H;G--){if(e.call(this,this._.tabIdList[G%H])){return this._.tabIdList[G%H]}}return null}function z(){var F=this._.currentTabId,H=this._.tabIdList.length,E=CKEDITOR.tools.indexOf(this._.tabIdList,F);for(var G=E+1;G<E+H;G++){if(e.call(this,this._.tabIdList[G%H])){return this._.tabIdList[G%H]}}return null}function q(F,H){var E=F.$.getElementsByTagName("input");for(var G=0,J=E.length;G<J;G++){var I=new CKEDITOR.dom.element(E[G]);if(I.getAttribute("type").toLowerCase()=="text"){if(H){I.setAttribute("value",I.getCustomData("fake_value")||"");I.removeCustomData("fake_value")}else{I.setCustomData("fake_value",I.getAttribute("value"));I.setAttribute("value","")}}}}function a(F,G){var E=this.getInputElement();if(E){F?E.removeAttribute("aria-invalid"):E.setAttribute("aria-invalid",true)}if(!F){if(this.select){this.select()}else{this.focus()}}G&&alert(G);this.fire("validated",{valid:F,msg:G})}function w(){var E=this.getInputElement();E&&E.removeAttribute("aria-invalid")}CKEDITOR.dialog=function(H,K){var I=CKEDITOR.dialog._.dialogDefinitions[K],V=CKEDITOR.tools.clone(s),ac=H.config.dialog_buttonsOrder||"OS",P=H.lang.dir,G={},W,E,M;if((ac=="OS"&&CKEDITOR.env.mac)||(ac=="rtl"&&P=="ltr")||(ac=="ltr"&&P=="rtl")){V.buttons.reverse()}I=CKEDITOR.tools.extend(I(H),V);I=CKEDITOR.tools.clone(I);I=new r(this,I);var ad=CKEDITOR.document;var U=H.theme.buildDialog(H);this._={editor:H,element:U.element,name:K,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=U.parts;CKEDITOR.tools.setTimeout(function(){H.fire("ariaWidget",this.parts.contents)},0,this);var aa={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};aa[P=="rtl"?"right":"left"]=0;this.parts.dialog.setStyles(aa);CKEDITOR.event.call(this);this.definition=I=CKEDITOR.fire("dialogDefinition",{name:K,definition:I},H).definition;if(!("removeDialogTabs" in H._)&&H.config.removeDialogTabs){var Z=H.config.removeDialogTabs.split(";");for(W=0;W<Z.length;W++){var Q=Z[W].split(":");if(Q.length==2){var F=Q[0];if(!G[F]){G[F]=[]}G[F].push(Q[1])}}H._.removeDialogTabs=G}if(H._.removeDialogTabs&&(G=H._.removeDialogTabs[K])){for(W=0;W<G.length;W++){I.removeContents(G[W])}}if(I.onLoad){this.on("load",I.onLoad)}if(I.onShow){this.on("show",I.onShow)}if(I.onHide){this.on("hide",I.onHide)}if(I.onOk){this.on("ok",function(ae){H.fire("saveSnapshot");setTimeout(function(){H.fire("saveSnapshot")},0);if(I.onOk.call(this,ae)===false){ae.data.hide=false}})}if(I.onCancel){this.on("cancel",function(ae){if(I.onCancel.call(this,ae)===false){ae.data.hide=false}})}var ab=this;var S=function(ai){var ah=ab._.contents,ag=false;for(var af in ah){for(var ae in ah[af]){ag=ai.call(this,ah[af][ae]);if(ag){return}}}};this.on("ok",function(ae){S(function(ag){if(ag.validate){var af=ag.validate(this),ah=typeof(af)=="string"||af===false;if(ah){ae.data.hide=false;ae.stop()}a.call(ag,!ah,typeof af=="string"?af:undefined);return ah}})},this,null,0);this.on("cancel",function(ae){S(function(af){if(af.isChanged()){if(!confirm(H.lang.common.confirmCancel)){ae.data.hide=false}return true}})},this,null,0);this.parts.close.on("click",function(ae){if(this.fire("cancel",{hide:true}).hide!==false){this.hide()}ae.data.preventDefault()},this);function O(){var ag=ab._.focusList;ag.sort(function(ai,ah){if(ai.tabIndex!=ah.tabIndex){return ah.tabIndex-ai.tabIndex}else{return ai.focusIndex-ah.focusIndex}});var af=ag.length;for(var ae=0;ae<af;ae++){ag[ae].focusIndex=ae}}function Y(ai){var aj=ab._.focusList;ai=ai||0;if(aj.length<1){return}var ag=ab._.currentFocusIndex;try{aj[ag].getInputElement().$.blur()}catch(af){}var ah=(ag+ai+aj.length)%aj.length,ae=ah;while(ai&&!aj[ae].isFocusable()){ae=(ae+ai+aj.length)%aj.length;if(ae==ah){break}}aj[ae].focus();if(aj[ae].type=="text"){aj[ae].select()}}this.changeFocus=Y;function L(ae){if(ab!=CKEDITOR.dialog._.currentTop){return}var ak=ae.data.getKeystroke(),aj=H.lang.dir=="rtl",af;E=M=0;if(ak==9||ak==CKEDITOR.SHIFT+9){var ah=(ak==CKEDITOR.SHIFT+9);if(ab._.tabBarMode){var ag=ah?p.call(ab):z.call(ab);ab.selectPage(ag);ab._.tabs[ag][0].focus()}else{Y(ah?-1:1)}E=1}else{if(ak==CKEDITOR.ALT+121&&!ab._.tabBarMode&&ab.getPageCount()>1){ab._.tabBarMode=true;ab._.tabs[ab._.currentTabId][0].focus();E=1}else{if((ak==37||ak==39)&&ab._.tabBarMode){ag=(ak==(aj?39:37)?p.call(ab):z.call(ab));ab.selectPage(ag);ab._.tabs[ag][0].focus();E=1}else{if((ak==13||ak==32)&&ab._.tabBarMode){this.selectPage(this._.currentTabId);this._.tabBarMode=false;this._.currentFocusIndex=-1;Y(1);E=1}else{if(ak==13){var ai=ae.data.getTarget();if(!ai.is("a","button","select")&&(!ai.is("input")||ai.$.type!="button")){af=this.getButton("ok");af&&CKEDITOR.tools.setTimeout(af.click,0,af);E=1}M=1}else{if(ak==27){af=this.getButton("cancel");if(af){CKEDITOR.tools.setTimeout(af.click,0,af)}else{if(this.fire("cancel",{hide:true}).hide!==false){this.hide()}}M=1}else{return}}}}}}R(ae)}function R(ae){if(E){ae.data.preventDefault(1)}else{if(M){ae.data.stopPropagation()}}}var T=this._.element;this.on("show",function(){T.on("keydown",L,this);if(CKEDITOR.env.opera||CKEDITOR.env.gecko){T.on("keypress",R,this)}});this.on("hide",function(){T.removeListener("keydown",L);if(CKEDITOR.env.opera||CKEDITOR.env.gecko){T.removeListener("keypress",R)}S(function(ae){w.apply(ae)})});this.on("iframeAdded",function(ae){var af=new CKEDITOR.dom.document(ae.data.iframe.$.contentWindow.document);af.on("keydown",L,this,null,0)});this.on("show",function(){O();if(H.config.dialog_startupFocusTab&&ab._.pageCount>1){ab._.tabBarMode=true;ab._.tabs[ab._.currentTabId][0].focus()}else{if(!this._.hasFocus){this._.currentFocusIndex=-1;if(I.onFocus){var af=I.onFocus.call(this);af&&af.focus()}else{Y(1)}if(this._.editor.mode=="wysiwyg"&&CKEDITOR.env.ie){var ae=H.document.$.selection,ah=ae.createRange();if(ah){if(ah.parentElement&&ah.parentElement().ownerDocument==H.document.$||ah.item&&ah.item(0).ownerDocument==H.document.$){var ag=document.body.createTextRange();ag.moveToElementText(this.getElement().getFirst().$);ag.collapse(true);ag.select()}}}}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(ae){var ag=this.getElement(),af=ag.getFirst();af.remove();af.appendTo(ag)},this)}u(this);C(this);(new CKEDITOR.dom.text(I.title,CKEDITOR.document)).appendTo(this.parts.title);for(W=0;W<I.contents.length;W++){var J=I.contents[W];J&&this.addPage(J)}this.parts.tabs.on("click",function(ae){var af=ae.data.getTarget();if(af.hasClass("cke_dialog_tab")){var ag=af.$.id;this.selectPage(ag.substring(4,ag.lastIndexOf("_")));if(this._.tabBarMode){this._.tabBarMode=false;this._.currentFocusIndex=-1;Y(1)}ae.data.preventDefault()}},this);var N=[],X=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:I.buttons},N).getChild();this.parts.footer.setHtml(N.join(""));for(W=0;W<X.length;W++){this._.buttons[X[W].id]=X[W]}};function B(G,F,E){this.element=F;this.focusIndex=E;this.tabIndex=0;this.isFocusable=function(){return !F.getAttribute("disabled")&&F.isVisible()};this.focus=function(){G._.currentFocusIndex=this.focusIndex;this.element.focus()};F.on("keydown",function(H){if(H.data.getKeystroke() in {32:1,13:1}){this.fire("click")}});F.on("focus",function(){this.fire("mouseover")});F.on("blur",function(){this.fire("mouseout")})}CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:(function(){return function(F,E){if(this._.contentSize&&this._.contentSize.width==F&&this._.contentSize.height==E){return}CKEDITOR.dialog.fire("resize",{dialog:this,skin:this._.editor.skinName,width:F,height:E},this._.editor);this.fire("resize",{skin:this._.editor.skinName,width:F,height:E},this._.editor);if(this._.editor.lang.dir=="rtl"&&this._.position){this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)}this._.contentSize={width:F,height:E}}})(),getSize:function(){var E=this._.element.getFirst();return{width:E.$.offsetWidth||0,height:E.$.offsetHeight||0}},move:(function(){var E;return function(M,J,I){var G=this._.element.getFirst(),K=this._.editor.lang.dir=="rtl";if(E===undefined){E=G.getComputedStyle("position")=="fixed"}if(E&&this._.position&&this._.position.x==M&&this._.position.y==J){return}this._.position={x:M,y:J};if(!E){var L=CKEDITOR.document.getWindow().getScrollPosition();M+=L.x;J+=L.y}if(K){var F=this.getSize(),H=CKEDITOR.document.getWindow().getViewPaneSize();M=H.width-F.width-M}var N={top:(J>0?J:0)+"px"};N[K?"right":"left"]=(M>0?M:0)+"px";G.setStyles(N);I&&(this._.moved=1)}})(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var G=this._.element;var F=this.definition;if(!(G.getParent()&&G.getParent().equals(CKEDITOR.document.getBody()))){G.appendTo(CKEDITOR.document.getBody())}else{G.setStyle("display","block")}if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var H=this.parts.dialog;H.setStyle("position","absolute");setTimeout(function(){H.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||F.width||F.minWidth,this._.contentSize&&this._.contentSize.height||F.height||F.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(CKEDITOR.dialog._.currentZIndex===null){CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex}this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);if(CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this;this._.parentDialog=null;h(this._.editor)}else{this._.parentDialog=CKEDITOR.dialog._.currentTop;var E=this._.parentDialog.getElement().getFirst();E.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);CKEDITOR.dialog._.currentTop=this}G.on("keydown",m);G.on(CKEDITOR.env.opera?"keypress":"keyup",x);this._.hasFocus=false;CKEDITOR.tools.setTimeout(function(){this.layout();this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this.foreach(function(I){I.setInitValue&&I.setInitValue()})},100,this)},layout:function(){var F=CKEDITOR.document.getWindow().getViewPaneSize(),E=this.getSize();this.move(this._.moved?this._.position.x:(F.width-E.width)/2,this._.moved?this._.position.y:(F.height-E.height)/2)},foreach:function(G){for(var F in this._.contents){for(var E in this._.contents[F]){G.call(this,this._.contents[F][E])}}return this},reset:(function(){var E=function(F){if(F.reset){F.reset(1)}};return function(){this.foreach(E);return this}})(),setupContent:function(){var E=arguments;this.foreach(function(F){if(F.setup){F.setup.apply(F,E)}})},commitContent:function(){var E=arguments;this.foreach(function(F){if(CKEDITOR.env.ie&&this._.currentFocusIndex==F.focusIndex){F.getInputElement().$.blur()}if(F.commit){F.commit.apply(F,E)}})},hide:function(){if(!this.parts.dialog.isVisible()){return}this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var F=this._.element;F.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");j(this);while(CKEDITOR.dialog._.currentTop!=this){CKEDITOR.dialog._.currentTop.hide()}if(!this._.parentDialog){n()}else{var E=this._.parentDialog.getElement().getFirst();E.setStyle("z-index",parseInt(E.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}CKEDITOR.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){CKEDITOR.dialog._.currentZIndex=null;F.removeListener("keydown",m);F.removeListener(CKEDITOR.env.opera?"keypress":"keyup",x);var H=this._.editor;H.focus();if(H.mode=="wysiwyg"&&CKEDITOR.env.ie){var G=H.getSelection();G&&G.unlock(true)}}else{CKEDITOR.dialog._.currentZIndex-=10}delete this._.parentDialog;this.foreach(function(I){I.resetInitValue&&I.resetInitValue()})},addPage:function(K){var H=[],L=K.label?' title="'+CKEDITOR.tools.htmlEncode(K.label)+'"':"",E=K.elements,O=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:K.elements,expand:!!K.expand,padding:K.padding,style:K.style||"width: 100%;height:100%"},H);var N=CKEDITOR.dom.element.createFromHtml(H.join(""));N.setAttribute("role","tabpanel");var M=CKEDITOR.env;var G="cke_"+K.id+"_"+CKEDITOR.tools.getNextNumber(),I=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',(this._.pageCount>0?" cke_last":"cke_first"),L,(!!K.hidden?' style="display:none"':""),' id="',G,'"',M.gecko&&M.version>=10900&&!M.hc?"":' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',K.label,"</a>"].join(""));N.setAttribute("aria-labelledby",G);this._.tabs[K.id]=[I,N];this._.tabIdList.push(K.id);!K.hidden&&this._.pageCount++;this._.lastTab=I;this.updateStyle();var J=this._.contents[K.id]={},P,F=O.getChild();while((P=F.shift())){J[P.id]=P;if(typeof(P.getChild)=="function"){F.push.apply(F,P.getChild())}}N.setAttribute("name",K.id);N.appendTo(this.parts.contents);I.unselectable();this.parts.tabs.append(I);if(K.accessKey){k(this,this,"CTRL+"+K.accessKey,D,f);this._.accessKeyMap["CTRL+"+K.accessKey]=K.id}},selectPage:function(I){if(this._.currentTabId==I){return}if(this.fire("selectPage",{page:I,currentPage:this._.currentTabId})===true){return}for(var E in this._.tabs){var G=this._.tabs[E][0],H=this._.tabs[E][1];if(E!=I){G.removeClass("cke_dialog_tab_selected");H.hide()}H.setAttribute("aria-hidden",E!=I)}var F=this._.tabs[I];F[0].addClass("cke_dialog_tab_selected");if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){q(F[1]);F[1].show();setTimeout(function(){q(F[1],1)},0)}else{F[1].show()}this._.currentTabId=I;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,I)},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(F){var E=this._.tabs[F]&&this._.tabs[F][0];if(!E||this._.pageCount==1||!E.isVisible()){return}else{if(F==this._.currentTabId){this.selectPage(p.call(this))}}E.hide();this._.pageCount--;this.updateStyle()},showPage:function(F){var E=this._.tabs[F]&&this._.tabs[F][0];if(!E){return}E.show();this._.pageCount++;this.updateStyle()},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(F,E){var G=this._.contents[F];return G&&G[E]},getValueOf:function(F,E){return this.getContentElement(F,E).getValue()},setValueOf:function(F,E,G){return this.getContentElement(F,E).setValue(G)},getButton:function(E){return this._.buttons[E]},click:function(E){return this._.buttons[E].click()},disableButton:function(E){return this._.buttons[E].disable()},enableButton:function(E){return this._.buttons[E].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(G,E){if(typeof E=="undefined"){E=this._.focusList.length;this._.focusList.push(new B(this,G,E))}else{this._.focusList.splice(E,0,new B(this,G,E));for(var F=E+1;F<this._.focusList.length;F++){this._.focusList[F].focusIndex++}}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(E,F){if(!this._.dialogDefinitions[E]||typeof F=="function"){this._.dialogDefinitions[E]=F}},exists:function(E){return !!this._.dialogDefinitions[E]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},okButton:(function(){var E=function(G,F){F=F||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:G.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(H){var I=H.data.dialog;if(I.fire("ok",{hide:true}).hide!==false){I.hide()}}},F,true)};E.type="button";E.override=function(F){return CKEDITOR.tools.extend(function(G){return E(G,F)},{type:"button"},true)};return E})(),cancelButton:(function(){var E=function(G,F){F=F||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:G.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(H){var I=H.data.dialog;if(I.fire("cancel",{hide:true}).hide!==false){I.hide()}}},F,true)};E.type="button";E.override=function(F){return CKEDITOR.tools.extend(function(G){return E(G,F)},{type:"button"},true)};return E})(),addUIElement:function(F,E){this._.uiElementBuilders[F]=E}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,true);var s={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]};var y=function(J,I,H){for(var F=0,G;(G=J[F]);F++){if(G.id==I){return G}if(H&&G[H]){var E=y(G[H],I,H);if(E){return E}}}return null};var c=function(L,G,K,I,J){if(K){for(var F=0,H;(H=L[F]);F++){if(H.id==K){L.splice(F,0,G);return G}if(I&&H[I]){var E=c(H[I],G,K,I,true);if(E){return E}}}if(J){return null}}L.push(G);return G};var i=function(J,I,H){for(var F=0,G;(G=J[F]);F++){if(G.id==I){return J.splice(F,1)}if(H&&G[H]){var E=i(G[H],I,H);if(E){return E}}}return null};var r=function(F,I){this.dialog=F;var H=I.contents;for(var E=0,G;(G=H[E]);E++){H[E]=G&&new b(F,G)}CKEDITOR.tools.extend(this,I)};r.prototype={getContents:function(E){return y(this.contents,E)},getButton:function(E){return y(this.buttons,E)},addContents:function(E,F){return c(this.contents,E,F)},addButton:function(E,F){return c(this.buttons,E,F)},removeContents:function(E){i(this.contents,E)},removeButton:function(E){i(this.buttons,E)}};function b(E,F){this._={dialog:E};CKEDITOR.tools.extend(this,F)}b.prototype={get:function(E){return y(this.elements,E,"children")},add:function(F,E){return c(this.elements,F,E,"children")},remove:function(E){i(this.elements,E,"children")}};function u(J){var G=null,L=null,F=J.getElement().getFirst(),H=J.getParentEditor(),E=H.config.dialog_magnetDistance,K=H.skin.margins||[0,0,0,0];if(typeof E=="undefined"){E=20}function I(T){var N=J.getSize(),Q=CKEDITOR.document.getWindow().getViewPaneSize(),S=T.data.$.screenX,R=T.data.$.screenY,V=S-G.x,U=R-G.y,P,O;G={x:S,y:R};L.x+=V;L.y+=U;if(L.x+K[3]<E){P=-K[3]}else{if(L.x-K[1]>Q.width-N.width-E){P=Q.width-N.width+(H.lang.dir=="rtl"?0:K[1])}else{P=L.x}}if(L.y+K[0]<E){O=-K[0]}else{if(L.y-K[2]>Q.height-N.height-E){O=Q.height-N.height+K[2]}else{O=L.y}}J.move(P,O,1);T.data.preventDefault()}function M(N){CKEDITOR.document.removeListener("mousemove",I);CKEDITOR.document.removeListener("mouseup",M);if(CKEDITOR.env.ie6Compat){var O=t.getChild(0).getFrameDocument();O.removeListener("mousemove",I);O.removeListener("mouseup",M)}}J.parts.title.on("mousedown",function(N){G={x:N.data.$.screenX,y:N.data.$.screenY};CKEDITOR.document.on("mousemove",I);CKEDITOR.document.on("mouseup",M);L=J.getPosition();if(CKEDITOR.env.ie6Compat){var O=t.getChild(0).getFrameDocument();O.on("mousemove",I);O.on("mouseup",M)}N.data.preventDefault()},J)}function C(K){var F=K.definition,E=F.resizable;if(E==CKEDITOR.DIALOG_RESIZE_NONE){return}var J=K.getParentEditor();var H,G,L,N,O,Q;var M=CKEDITOR.tools.addFunction(function(S){O=K.getSize();var T=K.parts.contents,R=T.$.getElementsByTagName("iframe").length;if(R){Q=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');T.append(Q)}G=O.height-K.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));H=O.width-K.parts.contents.getSize("width",1);N={x:S.screenX,y:S.screenY};L=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",I);CKEDITOR.document.on("mouseup",P);if(CKEDITOR.env.ie6Compat){var U=t.getChild(0).getFrameDocument();U.on("mousemove",I);U.on("mouseup",P)}S.preventDefault&&S.preventDefault()});K.on("load",function(){var R="";if(E==CKEDITOR.DIALOG_RESIZE_WIDTH){R=" cke_resizer_horizontal"}else{if(E==CKEDITOR.DIALOG_RESIZE_HEIGHT){R=" cke_resizer_vertical"}}var S=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+R+" cke_resizer_"+J.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(J.lang.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+M+', event )"></div>');K.parts.footer.append(S,1)});J.on("destroy",function(){CKEDITOR.tools.removeFunction(M)});function I(Y){var W=J.lang.dir=="rtl",ab=(Y.data.$.screenX-N.x)*(W?-1:1),aa=Y.data.$.screenY-N.y,R=O.width,Z=O.height,S=R+ab*(K._.moved?1:2),U=Z+aa*(K._.moved?1:2),T=K._.element.getFirst(),X=W&&T.getComputedStyle("right"),V=K.getPosition();if(V.y+U>L.height){U=L.height-V.y}if((W?X:V.x)+S>L.width){S=L.width-(W?X:V.x)}if((E==CKEDITOR.DIALOG_RESIZE_WIDTH||E==CKEDITOR.DIALOG_RESIZE_BOTH)){R=Math.max(F.minWidth||0,S-H)}if(E==CKEDITOR.DIALOG_RESIZE_HEIGHT||E==CKEDITOR.DIALOG_RESIZE_BOTH){Z=Math.max(F.minHeight||0,U-G)}K.resize(R,Z);if(!K._.moved){K.layout()}Y.data.preventDefault()}function P(){CKEDITOR.document.removeListener("mouseup",P);CKEDITOR.document.removeListener("mousemove",I);if(Q){Q.remove();Q=null}if(CKEDITOR.env.ie6Compat){var R=t.getChild(0).getFrameDocument();R.removeListener("mouseup",P);R.removeListener("mousemove",I)}}}var o;var l={},t;function A(E){E.data.preventDefault(1)}function h(M){var L=CKEDITOR.document.getWindow();var F=M.config,N=F.dialog_backgroundCoverColor||"white",H=F.dialog_backgroundCoverOpacity,O=F.baseFloatZIndex,Q=CKEDITOR.tools.genKey(N,H,O),G=l[Q];if(!G){var K=['<div tabIndex="-1" style="position: ',(CKEDITOR.env.ie6Compat?"absolute":"fixed"),"; z-index: ",O,"; top: 0px; left: 0px; ",(!CKEDITOR.env.ie6Compat?"background-color: "+N:""),'" class="cke_dialog_background_cover">'];if(CKEDITOR.env.ie6Compat){var J=CKEDITOR.env.isCustomDomain(),P="<html><body style=\\'background-color:"+N+";\\'></body></html>";K.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');K.push("void((function(){document.open();"+(J?"document.domain='"+document.domain+"';":"")+"document.write( '"+P+"' );document.close();})())");K.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')}K.push("</div>");G=CKEDITOR.dom.element.createFromHtml(K.join(""));G.setOpacity(H!=undefined?H:0.5);G.on("keydown",A);G.on("keypress",A);G.on("keyup",A);G.appendTo(CKEDITOR.document.getBody());l[Q]=G}else{G.show()}t=G;var R=function(){var S=L.getViewPaneSize();G.setStyles({width:S.width+"px",height:S.height+"px"})};var I=function(){var U=L.getScrollPosition(),T=CKEDITOR.dialog._.currentTop;G.setStyles({left:U.x+"px",top:U.y+"px"});if(T){do{var S=T.getPosition();T.move(S.x,S.y)}while((T=T._.parentDialog))}};o=R;L.on("resize",R);R();if(!(CKEDITOR.env.mac&&CKEDITOR.env.webkit)){G.focus()}if(CKEDITOR.env.ie6Compat){var E=function(){I();arguments.callee.prevScrollHandler.apply(this,arguments)};L.$.setTimeout(function(){E.prevScrollHandler=window.onscroll||function(){};window.onscroll=E},0);I()}}function n(){if(!t){return}var E=CKEDITOR.document.getWindow();t.hide();E.removeListener("resize",o);if(CKEDITOR.env.ie6Compat){E.$.setTimeout(function(){var F=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=F||null},0)}o=null}function d(){for(var E in l){l[E].remove()}l={}}var v={};var m=function(G){var I=G.data.$.ctrlKey||G.data.$.metaKey,J=G.data.$.altKey,F=G.data.$.shiftKey,H=String.fromCharCode(G.data.$.keyCode),E=v[(I?"CTRL+":"")+(J?"ALT+":"")+(F?"SHIFT+":"")+H];if(!E||!E.length){return}E=E[E.length-1];E.keydown&&E.keydown.call(E.uiElement,E.dialog,E.key);G.data.preventDefault()};var x=function(G){var I=G.data.$.ctrlKey||G.data.$.metaKey,J=G.data.$.altKey,F=G.data.$.shiftKey,H=String.fromCharCode(G.data.$.keyCode),E=v[(I?"CTRL+":"")+(J?"ALT+":"")+(F?"SHIFT+":"")+H];if(!E||!E.length){return}E=E[E.length-1];if(E.keyup){E.keyup.call(E.uiElement,E.dialog,E.key);G.data.preventDefault()}};var k=function(E,G,F,H,J){var I=v[F]||(v[F]=[]);I.push({uiElement:E,dialog:G,key:F,keyup:J||E.accessKeyUp,keydown:H||E.accessKeyDown})};var j=function(H){for(var F in v){var G=v[F];for(var E=G.length-1;E>=0;E--){if(G[E].dialog==H||G[E].uiElement==H){G.splice(E,1)}}if(G.length===0){delete v[F]}}};var f=function(F,E){if(F._.accessKeyMap[E]){F.selectPage(F._.accessKeyMap[E])}};var D=function(F,E){};(function(){CKEDITOR.ui.dialog={uiElement:function(W,Q,R,H,T,F,G){if(arguments.length<4){return}var E=(H.call?H(Q):H)||"div",O=["<",E," "],N=(T&&T.call?T(Q):T)||{},M=(F&&F.call?F(Q):F)||{},K=(G&&G.call?G.call(this,W,Q):G)||"",J=this.domId=M.id||CKEDITOR.tools.getNextId()+"_uiElement",S=this.id=Q.id,V;M.id=J;var X={};if(Q.type){X["cke_dialog_ui_"+Q.type]=1}if(Q.className){X[Q.className]=1}if(Q.disabled){X.cke_disabled=1}var L=(M["class"]&&M["class"].split)?M["class"].split(" "):[];for(V=0;V<L.length;V++){if(L[V]){X[L[V]]=1}}var I=[];for(V in X){I.push(V)}M["class"]=I.join(" ");if(Q.title){M.title=Q.title}var P=(Q.style||"").split(";");if(Q.align){var U=Q.align;N["margin-left"]=U=="left"?0:"auto";N["margin-right"]=U=="right"?0:"auto"}for(V in N){P.push(V+":"+N[V])}if(Q.hidden){P.push("display:none")}for(V=P.length-1;V>=0;V--){if(P[V]===""){P.splice(V,1)}}if(P.length>0){M.style=(M.style?(M.style+"; "):"")+P.join("; ")}for(V in M){O.push(V+'="'+CKEDITOR.tools.htmlEncode(M[V])+'" ')}O.push(">",K,"</",E,">");R.push(O.join(""));(this._||(this._={})).dialog=W;if(typeof(Q.isChanged)=="boolean"){this.isChanged=function(){return Q.isChanged}}if(typeof(Q.isChanged)=="function"){this.isChanged=Q.isChanged}if(typeof(Q.setValue)=="function"){this.setValue=CKEDITOR.tools.override(this.setValue,function(Z){return function(aa){Z.call(this,Q.setValue.call(this,aa))}})}if(typeof(Q.getValue)=="function"){this.getValue=CKEDITOR.tools.override(this.getValue,function(Z){return function(){return Q.getValue.call(this,Z.call(this))}})}CKEDITOR.event.implementOn(this);this.registerEvents(Q);if(this.accessKeyUp&&this.accessKeyDown&&Q.accessKey){k(this,W,"CTRL+"+Q.accessKey)}var Y=this;W.on("load",function(){var Z=Y.getInputElement();if(Z){var aa=Y.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";Z.on("focus",function(){W._.tabBarMode=false;W._.hasFocus=true;Y.fire("focus");aa&&this.addClass(aa)});Z.on("blur",function(){Y.fire("blur");aa&&this.removeClass(aa)})}});if(this.keyboardFocusable){this.tabIndex=Q.tabIndex||0;this.focusIndex=W._.focusList.push(this)-1;this.on("focus",function(){W._.currentFocusIndex=Y.focusIndex})}CKEDITOR.tools.extend(this,Q)},hbox:function(K,O,P,G,F){if(arguments.length<4){return}this._||(this._={});var H=this._.children=O,I=F&&F.widths||null,M=F&&F.height||null,N={},J;var L=function(){var Q=['<tbody><tr class="cke_dialog_ui_hbox">'];for(J=0;J<P.length;J++){var R="cke_dialog_ui_hbox_child",S=[];if(J===0){R="cke_dialog_ui_hbox_first"}if(J==P.length-1){R="cke_dialog_ui_hbox_last"}Q.push('<td class="',R,'" role="presentation" ');if(I){if(I[J]){S.push("width:"+g(I[J]))}}else{S.push("width:"+Math.floor(100/P.length)+"%")}if(M){S.push("height:"+g(M))}if(F&&F.padding!=undefined){S.push("padding:"+g(F.padding))}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&H[J].align){S.push("text-align:"+H[J].align)}if(S.length>0){Q.push('style="'+S.join("; ")+'" ')}Q.push(">",P[J],"</td>")}Q.push("</tr></tbody>");return Q.join("")};var E={role:"presentation"};F&&F.align&&(E.align=F.align);CKEDITOR.ui.dialog.uiElement.call(this,K,F||{type:"hbox"},G,"table",N,E,L)},vbox:function(I,L,M,G,E){if(arguments.length<3){return}this._||(this._={});var H=this._.children=L,F=E&&E.width||null,J=E&&E.heights||null;var K=function(){var O=['<table role="presentation" cellspacing="0" border="0" '];O.push('style="');if(E&&E.expand){O.push("height:100%;")}O.push("width:"+g(F||"100%"),";");O.push('"');O.push('align="',CKEDITOR.tools.htmlEncode((E&&E.align)||(I.getParentEditor().lang.dir=="ltr"?"left":"right")),'" ');O.push("><tbody>");for(var N=0;N<M.length;N++){var P=[];O.push('<tr><td role="presentation" ');if(F){P.push("width:"+g(F||"100%"))}if(J){P.push("height:"+g(J[N]))}else{if(E&&E.expand){P.push("height:"+Math.floor(100/M.length)+"%")}}if(E&&E.padding!=undefined){P.push("padding:"+g(E.padding))}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&H[N].align){P.push("text-align:"+H[N].align)}if(P.length>0){O.push('style="',P.join("; "),'" ')}O.push(' class="cke_dialog_ui_vbox_child">',M[N],"</td></tr>")}O.push("</tbody></table>");return O.join("")};CKEDITOR.ui.dialog.uiElement.call(this,I,E||{type:"vbox"},G,"div",null,{role:"presentation"},K)}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(F,E){this.getInputElement().setValue(F);!E&&this.fire("change",{value:F});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return false},selectParentTab:function(){var F=this.getInputElement(),G=F,E;while((G=G.getParent())&&G.$.className.search("cke_dialog_page_contents")==-1){}if(!G){return this}E=G.getAttribute("name");if(this._.dialog._.currentTabId!=E){this._.dialog.selectPage(E)}return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(G){var H=/^on([A-Z]\w+)/,E;var I=function(K,L,J,M){L.on("load",function(){K.getInputElement().on(J,M,K)})};for(var F in G){if(!(E=F.match(H))){continue}if(this.eventProcessors[F]){this.eventProcessors[F].call(this,this._.dialog,G[F])}else{I(this,this._.dialog,E[1].toLowerCase(),G[F])}}return this},eventProcessors:{onLoad:function(E,F){E.on("load",F,this)},onShow:function(E,F){E.on("show",F,this)},onHide:function(E,F){E.on("hide",F,this)}},accessKeyDown:function(F,E){this.focus()},accessKeyUp:function(F,E){},disable:function(){var F=this.getElement(),E=this.getInputElement();E.setAttribute("disabled","true");F.addClass("cke_disabled")},enable:function(){var F=this.getElement(),E=this.getInputElement();E.removeAttribute("disabled");F.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){if(!this.isEnabled()||!this.isVisible()){return false}return true}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(E){if(arguments.length<1){return this._.children.concat()}if(!E.splice){E=[E]}if(E.length<2){return this._.children[E[0]]}else{return(this._.children[E[0]]&&this._.children[E[0]].getChild)?this._.children[E[0]].getChild(E.slice(1,E.length)):null}}},true);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox();(function(){var E={build:function(L,F,I){var H=F.children,G,N=[],M=[];for(var K=0;(K<H.length&&(G=H[K]));K++){var J=[];N.push(J);M.push(CKEDITOR.dialog._.uiElementBuilders[G.type].build(L,G,J))}return new CKEDITOR.ui.dialog[F.type](L,M,N,I,F)}};CKEDITOR.dialog.addUIElement("hbox",E);CKEDITOR.dialog.addUIElement("vbox",E)})();CKEDITOR.dialogCommand=function(E){this.dialogName=E};CKEDITOR.dialogCommand.prototype={exec:function(E){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){E.openDialog(this.dialogName)},0,this):E.openDialog(this.dialogName)},canUndo:false,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit};(function(){var F=/^([a]|[^a])+$/,E=/^\d*$/,G=/^\d*(?:\.\d+)?$/,H=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,J=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,I=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var K=arguments;return function(){var N=this&&this.getValue?this.getValue():K[0];var P=undefined,M=CKEDITOR.VALIDATE_AND,O=[],L;for(L=0;L<K.length;L++){if(typeof(K[L])=="function"){O.push(K[L])}else{break}}if(L<K.length&&typeof(K[L])=="string"){P=K[L];L++}if(L<K.length&&typeof(K[L])=="number"){M=K[L]}var Q=(M==CKEDITOR.VALIDATE_AND?true:false);for(L=0;L<O.length;L++){if(M==CKEDITOR.VALIDATE_AND){Q=Q&&O[L](N)}else{Q=Q||O[L](N)}}return !Q?P:true}},regex:function(K,L){return function(){var M=this&&this.getValue?this.getValue():arguments[0];return !K.test(M)?L:true}},notEmpty:function(K){return this.regex(F,K)},integer:function(K){return this.regex(E,K)},number:function(K){return this.regex(G,K)},cssLength:function(K){return this.functions(function(L){return J.test(CKEDITOR.tools.trim(L))},K)},htmlLength:function(K){return this.functions(function(L){return H.test(CKEDITOR.tools.trim(L))},K)},inlineStyle:function(K){return this.functions(function(L){return I.test(CKEDITOR.tools.trim(L))},K)},equals:function(K,L){return this.functions(function(M){return M==K},L)},notEqual:function(K,L){return this.functions(function(M){return M!=K},L)}};CKEDITOR.on("instanceDestroyed",function(L){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){var K;while((K=CKEDITOR.dialog._.currentTop)){K.hide()}d()}var N=L.editor._.storedDialogs;for(var M in N){N[M].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(G,N){if(this.mode=="wysiwyg"&&CKEDITOR.env.ie){var K=this.getSelection();K&&K.lock()}var F=CKEDITOR.dialog._.dialogDefinitions[G],E=this.skin.dialog;if(CKEDITOR.dialog._.currentTop===null){h(this)}if(typeof F=="function"&&E._isLoaded){var L=this._.storedDialogs||(this._.storedDialogs={});var I=L[G]||(L[G]=new CKEDITOR.dialog(this,G));N&&N.call(I,I);I.show();return I}else{if(F=="failed"){n();throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+G+'" failed when loading definition.')}}var J=this;function H(P){var Q=CKEDITOR.dialog._.dialogDefinitions[G],O=J.skin.dialog;if(!O._isLoaded||M&&typeof P=="undefined"){return}if(typeof Q!="function"){CKEDITOR.dialog._.dialogDefinitions[G]="failed"}J.openDialog(G,N)}if(typeof F=="string"){var M=1;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(F),H,null,0,1)}CKEDITOR.skins.load(this,"dialog",H);return null}})})();CKEDITOR.plugins.add("dialog",{requires:["dialogui"]});