(function(){function b(f){var e=f.getStyle("overflow-y");var g=f.getDocument();var d=CKEDITOR.dom.element.createFromHtml('<span style="margin:0;padding:0;border:0;clear:both;width:1px;height:1px;display:block;">'+(CKEDITOR.env.webkit?"&nbsp;":"")+"</span>",g);g[CKEDITOR.env.ie?"getBody":"getDocumentElement"]().append(d);var c=d.getDocumentPosition(g).y+d.$.offsetHeight;d.remove();f.setStyle("overflow-y",e);return c}var a=function(i){if(!i.window){return}var l=i.document,g=new CKEDITOR.dom.element(l.getWindow().$.frameElement),h=l.getBody(),e=l.getDocumentElement(),d=i.window.getViewPaneSize().height,k=l.$.compatMode=="BackCompat"?h:e,c=b(k);c+=(i.config.autoGrow_bottomSpace||0);var f=i.config.autoGrow_minHeight!=undefined?i.config.autoGrow_minHeight:200,j=i.config.autoGrow_maxHeight||Infinity;c=Math.max(c,f);c=Math.min(c,j);if(c!=d){c=i.fire("autoGrow",{currentHeight:d,newHeight:c}).newHeight;i.resize(i.container.getStyle("width"),c,true)}if(k.$.scrollHeight>k.$.clientHeight&&c<j){k.setStyle("overflow-y","hidden")}else{k.removeStyle("overflow-y")}};CKEDITOR.plugins.add("autogrow",{init:function(d){d.addCommand("autogrow",{exec:a,modes:{wysiwyg:1},readOnly:1,canUndo:false,editorFocus:false});var e={contentDom:1,key:1,selectionChange:1,insertElement:1,mode:1};d.config.autoGrow_onStartup&&(e.instanceReady=1);for(var c in e){d.on(c,function(f){var g=d.getCommand("maximize");if(f.editor.mode=="wysiwyg"&&(!g||g.state!=CKEDITOR.TRISTATE_ON)){setTimeout(function(){a(f.editor);a(f.editor)},100)}})}}})})();