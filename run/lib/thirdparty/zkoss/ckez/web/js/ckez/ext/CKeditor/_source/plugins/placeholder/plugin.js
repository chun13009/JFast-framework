(function(){var a=/\[\[[^\]]+\]\]/g;CKEDITOR.plugins.add("placeholder",{requires:["dialog"],lang:["bg","cs","cy","da","de","el","en","eo","et","fa","fi","fr","he","hr","it","nb","nl","no","pl","pt-br","tr","ug","uk","vi","zh-cn"],init:function(b){var c=b.lang.placeholder;b.addCommand("createplaceholder",new CKEDITOR.dialogCommand("createplaceholder"));b.addCommand("editplaceholder",new CKEDITOR.dialogCommand("editplaceholder"));b.ui.addButton("CreatePlaceholder",{label:c.toolbar,command:"createplaceholder",icon:this.path+"placeholder.gif"});if(b.addMenuItems){b.addMenuGroup("placeholder",20);b.addMenuItems({editplaceholder:{label:c.edit,command:"editplaceholder",group:"placeholder",order:1,icon:this.path+"placeholder.gif"}});if(b.contextMenu){b.contextMenu.addListener(function(d,e){if(!d||!d.data("cke-placeholder")){return null}return{editplaceholder:CKEDITOR.TRISTATE_OFF}})}}b.on("doubleclick",function(d){if(CKEDITOR.plugins.placeholder.getSelectedPlaceHoder(b)){d.data.dialog="editplaceholder"}});b.addCss(".cke_placeholder{background-color: #ffff00;"+(CKEDITOR.env.gecko?"cursor: default;":"")+"}");b.on("contentDom",function(){b.document.getBody().on("resizestart",function(d){if(b.getSelection().getSelectedElement().data("cke-placeholder")){d.data.preventDefault()}})});CKEDITOR.dialog.add("createplaceholder",this.path+"dialogs/placeholder.js");CKEDITOR.dialog.add("editplaceholder",this.path+"dialogs/placeholder.js")},afterInit:function(c){var b=c.dataProcessor,d=b&&b.dataFilter,e=b&&b.htmlFilter;if(d){d.addRules({text:function(f){return f.replace(a,function(g){return CKEDITOR.plugins.placeholder.createPlaceholder(c,null,g,1)})}})}if(e){e.addRules({elements:{span:function(f){if(f.attributes&&f.attributes["data-cke-placeholder"]){delete f.name}}}})}}})})();CKEDITOR.plugins.placeholder={createPlaceholder:function(c,a,e,d){var b=new CKEDITOR.dom.element("span",c.document);b.setAttributes({contentEditable:"false","data-cke-placeholder":1,"class":"cke_placeholder"});e&&b.setText(e);if(d){return b.getOuterHtml()}if(a){if(CKEDITOR.env.ie){b.insertAfter(a);setTimeout(function(){a.remove();b.focus()},10)}else{b.replace(a)}}else{c.insertElement(b)}return null},getSelectedPlaceHoder:function(b){var a=b.getSelection().getRanges()[0];a.shrink(CKEDITOR.SHRINK_TEXT);var c=a.startContainer;while(c&&!(c.type==CKEDITOR.NODE_ELEMENT&&c.data("cke-placeholder"))){c=c.getParent()}return c}};