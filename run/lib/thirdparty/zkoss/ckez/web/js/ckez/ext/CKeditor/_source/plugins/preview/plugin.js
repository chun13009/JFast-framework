(function(){var a;var b={modes:{wysiwyg:1,source:1},canUndo:false,readOnly:1,exec:function(p){var j,i=p.config,m=i.baseHref?'<base href="'+i.baseHref+'"/>':"",k=CKEDITOR.env.isCustomDomain();if(i.fullPage){j=p.getData().replace(/<head>/,"$&"+m).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+p.lang.preview)}else{var n="<body ",o=p.document&&p.document.getBody();if(o){if(o.getAttribute("id")){n+='id="'+o.getAttribute("id")+'" '}if(o.getAttribute("class")){n+='class="'+o.getAttribute("class")+'" '}}n+=">";j=p.config.docType+'<html dir="'+p.config.contentsLangDirection+'"><head>'+m+"<title>"+p.lang.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(p.config.contentsCss)+"</head>"+n+p.getData()+"</body></html>"}var g=640,d=420,l=80;try{var s=window.screen;g=Math.round(s.width*0.8);d=Math.round(s.height*0.7);l=Math.round(s.width*0.1)}catch(q){}var h="";if(k){window._cke_htmlToLoad=j;h='javascript:void( (function(){document.open();document.domain="'+document.domain+'";document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )'}if(CKEDITOR.env.gecko){window._cke_htmlToLoad=j;h=a+"preview.html"}var f=window.open(h,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+g+",height="+d+",left="+l);if(!k&&!CKEDITOR.env.gecko){var r=f.document;r.open();r.write(j);r.close();CKEDITOR.env.webkit&&setTimeout(function(){r.body.innerHTML+=""},0)}}};var c="preview";CKEDITOR.plugins.add(c,{init:function(d){a=this.path;d.addCommand(c,b);d.ui.addButton("Preview",{label:d.lang.preview,command:c})}})})();