CKEDITOR.plugins.add("menubutton",{requires:["button","menu"],beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";(function(){var a=function(c){var b=this._;if(b.state===CKEDITOR.TRISTATE_DISABLED){return}b.previousState=b.state;var d=b.menu;if(!d){d=b.menu=new CKEDITOR.menu(c,{panel:{className:c.skinClass+" cke_contextmenu",attributes:{"aria-label":c.lang.common.options}}});d.onHide=CKEDITOR.tools.bind(function(){this.setState(this.modes&&this.modes[c.mode]?b.previousState:CKEDITOR.TRISTATE_DISABLED)},this);if(this.onMenu){d.addListener(this.onMenu)}}if(b.on){d.hide();return}this.setState(CKEDITOR.TRISTATE_ON);d.show(CKEDITOR.document.getById(this._.id),4)};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){var c=b.panel;delete b.panel;this.base(b);this.hasArrow=true;this.click=a},statics:{handler:{create:function(b){return new CKEDITOR.ui.menuButton(b)}}}})})();